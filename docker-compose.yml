services:
  zeroclaw:
    build: .
    container_name: zeroclaw
    ports:
      - "8080:8080"
    environment:
      - ZEROCLAW_CONFIG=/root/.zeroclaw/config.toml
      - ZEROCLAW_DEFAULT_PROVIDER=custom:http://host.docker.internal:1234/v1
      - ZEROCLAW_DEFAULT_MODEL=gpt-oss-20b
      # --- FORCE OPENAI TO REDIRECT FOR LMSTUDIO ---
      - OPENAI_BASE_URL=custom:http://host.docker.internal:1234/v1
      - OPENAI_API_KEY=lm-studio
      - OPENAI_API_BASE=custom:http://host.docker.internal:1234/v1
    volumes:
      - ./workspace:/root/.zeroclaw/workspace

    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
